<script type="text/javascript">
    angular.module('app').controller('HomePageCntrl', [
        '$scope', '$http', '$rootScope', '$filter', '$timeout', function ($scope, $http, $rootScope, $filter, $timeout) {

            $scope.getfilesList = function () {
                return $http({
                    method: 'GET',
                    url: '@Url.Action("GetDocumentsList", "Documents")'
                }).then(function (resp) {
                    $scope.filesFromDb = resp.data;
                });
            }

            $scope.removeDocument = function (file) {
                $http.post('@Url.Action("DeleteDocument", "Documents")', { documentId: file.Id }).then(
                    function () {
                        $rootScope.showSuccess("@DocsManagerWebApp.Resources.DocsManagerResources.FileRemoved_message");
                        $scope.getfilesList();
                    });
            };

            $scope.downloadDocument = function(file) {
                window.location.href = "@Url.Action("DownloadDocument", "Documents")?fileId=" + file.Id;
            }
            
            $timeout(function () {
                $scope.getfilesList();
            });
        }
    ]);
</script>